# ğŸ’³ SISTEMA DE PAGAMENTO PIX MANUAL

## ğŸ¯ FLUXO COMPLETO

```
1. CLIENTE COMPRA
   â””â”€ /comprar-pix
   â””â”€ Escolhe: Com Desconto ou Sem Desconto
   â””â”€ Recebe: Chave PIX + ID do Pedido

2. CLIENTE PAGA
   â””â”€ Copia a chave PIX
   â””â”€ Faz transferÃªncia no valor exato
   â””â”€ Tira screenshot do comprovante

3. CLIENTE ENVIA COMPROVANTE
   â””â”€ Clica no botÃ£o "ğŸ“¸ Enviar Comprovante"
   â””â”€ Seleciona a imagem
   â””â”€ Pedido vai para "Aguardando ValidaÃ§Ã£o"

4. ADMIN VALIDA
   â””â”€ Ve em #logs-vendas novo pedido
   â””â”€ Usa: /pedidos-pendentes (lista todos)
   â””â”€ Usa: /validar-comprovante order_id:ORD-XXXXX aproved:true
   â””â”€ ComissÃ£o Ã© creditada automaticamente!

5. CLIENTE NOTIFICADO
   â””â”€ Recebe DM: "Pagamento Confirmado!"
   â””â”€ Pode usar o serviÃ§o
```

---

## ğŸ“‹ COMANDOS

### Cliente
```
/comprar-pix              # Iniciar compra com PIX
```

### Admin
```
/pedidos-pendentes        # Lista pedidos aguardando comprovante
/validar-comprovante      # Aprova ou rejeita comprovante
```

---

## ğŸ”§ CONFIGURAÃ‡ÃƒO

### 1. Adicione a Chave PIX no .env
```
PIX_KEY=chave-pix@suaurea.com
```

Ou use padrÃ£o (sem configurar):
```
PIX_KEY=chave-pix-padrao@example.com
```

### 2. Crie os Canais (se nÃ£o tiver)
- `#logs-vendas` - Recebe notificaÃ§Ãµes de pedidos
- `#logs-gerais` - Logs gerais
- `#logs-erros` - Erros

### 3. Crie a Role
- `Admin` - Pode validar comprovantes

---

## ğŸ’° VALORES

### Com Desconto (5% OFF)
```
Valor Original:    R$ 100,00
Desconto (5%):    -R$   5,00
Valor Final:       R$  95,00
ComissÃ£o (10%):   +R$   9,50 (para o streamer)
```

### Sem Desconto
```
Valor:             R$ 100,00
ComissÃ£o:          R$   0,00 (nÃ£o hÃ¡ streamer)
```

---

## ğŸ“Š BANCO DE DADOS

Cada pedido armazena:
- `orderId` - ID Ãºnico
- `clientName` - Nome do cliente
- `service` - Tipo de serviÃ§o
- `originalPrice` - Valor original
- `finalPrice` - Valor com desconto
- `affiliateId` - ID do streamer
- `affiliateCommission` - ComissÃ£o do streamer
- `status` - EstÃ¡gio do pedido
- `pixKey` - Chave PIX usada
- `proofImageUrl` - URL da imagem do comprovante
- `validatedBy` - Quem validou
- `validatedAt` - Data da validaÃ§Ã£o

---

## ğŸ§ª TESTE RÃPIDO

### 1. Cliente ComeÃ§a Compra
```
/comprar-pix
â”œâ”€ Clica: "Comprar com Desconto (5% OFF)"
â”œâ”€ Informa: Streamer, ServiÃ§o, Valor, Nome, Email
â””â”€ Recebe: Chave PIX + ID do Pedido
```

### 2. Admin Lista
```
/pedidos-pendentes
```
Resultado: Mostra pedido aguardando

### 3. Admin Valida
```
/validar-comprovante order_id:ORD-XXXXX aproved:true
```
Resultado: "âœ… Comprovante Validado"

### 4. Verificar ComissÃ£o
```
/meu-perfil
```
Resultado: Streamer tem comissÃ£o creditada

---

## âœ… STATUS

| Feature | Status |
|---------|--------|
| Compra com PIX | âœ… Completo |
| Gerar ID pedido | âœ… Completo |
| Mostrar chave PIX | âœ… Completo |
| Receber comprovante | âœ… Implementando |
| Validar comprovante | âœ… Completo |
| Creditar comissÃ£o | âœ… AutomÃ¡tico |
| Notificar cliente | âœ… DM automÃ¡tica |
| Logs | âœ… Completo |

---

## ğŸ¯ PRONTO PARA USAR!

Tudo estÃ¡ funcionando:
1. âœ… Cliente compra e recebe chave PIX
2. âœ… Admin vÃª pedidos pendentes
3. âœ… Admin valida comprovante
4. âœ… ComissÃ£o Ã© creditada automaticamente
5. âœ… Tudo Ã© registrado e auditado

**Reinicia o bot e testa! ğŸš€**
